<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="description" content="Shop Glittergrej her. Nøgleringe, keychains, postkort og meget andet.">
    <meta name="keywords" content="Glittergrej,glitter,glimmer,handmade,Aarhus,Århus,handmade,keychain,nøglering,vulva,yoni,girly">
    <meta name="author" content="Glittergrej">

    <title>Glittergrej ✨ Shop</title>

    <!-- GOOGLE FONT -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@300;400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style1.css">

    <!-- FAVICON -->
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon/favicon-32x32.png">
</head>

<body>
    <!-- HEADER MED LOGO OG NAVIGATION -->
    <header>
        <nav>
            <div id="header-ikoner"><img id="shopping-cart" src="img/shopping-cart-icon.png" alt="Glittergrej shopping cart ikon">
                <div id="menuknap">☰</div>
            </div>
            <div class="menu-container">
                <div id="logo"><a href="index.html"><img src="img/glittergrej-logo.png" alt="Glittergrej logo">
                    </a>
                </div>
            </div>
            <ul id="menu" class="hidden">
                <li><a href="index.html">Forside</a></li>
                <li><a href="shop-trial.html">Shop</a></li>

                <div class="dropdown">
                    <li><a href="om-glittergrej.html">Om Glittergrej</a></li>
                    <div class="dropdown-content">
                        <a href="events.html">Events</a>
                        <a href="forhandlere.html">Forhandlere</a>
                    </div>
                </div>

                <li><a href="kontakt.html">Kontakt</a></li>

                <div id="searchbar">
                    <input type="text" placeholder="Søg..." name="search">
                    <img src="img/searchbar-icon.png" alt="Søgebar ikon">
                </div>

                <div id="social-media-container">
                    <div class="social-media">
                        <img src="img/glittergrej-facebook-icon.png" alt="Glittergrej Facebook ikon">

                        <img src="img/glittergrej-instagram-icon.png" alt="Glittergrej Instagram ikon">
                    </div>
                </div>
            </ul>
        </nav>
    </header>

    <section class="whole">
        <div class="filtre">
            <button class="filter valgt" data-item="alle">Alle Produkter</button>
            <button class="filter" data-item="4">Illustrationer</button>
            <button class="filter" data-item="5">Nøgleringe</button>
            <button class="filter" data-item="6">Jul</button>
            <button class="filter" data-item="7">Andet</button>
            <!--            <button class="filter" data-køn="">Udsalg</button>-->
        </div>

        <!--        HVORFOR SKAL DER VÆRE CONTAINER!?    MARTIN???  -->
        <section id="container"></section>

        <template class="destination-template">
            <article id="grid-article">
                <img src="" alt="" class="produktbillede1">
                <h1 class="produktnavn"></h1>
                <p class="produktpris"></p>
            </article>
        </template>
    </section>

    <footer>
        <div class="sectionwrapper">
            <div class="col1">
                <a href="#">Handelsbetingelser</a>
                <a href="#">Cookies og privatlivspolitik</a>
                <p>
                    @Glittergrej 2020 <br>
                    CVR: 40044167
                </p>
                <p>Betalingsmetoder:</p>
                <img src="img/logo/Visa-Logo.png" alt="visa-logo" class="img-kort">
                <img src="img/logo/mastercard-vector-logo.png" alt="mastercard-logo" class="img-kort">
            </div>

            <div class="sectionwrapper2">
                <div class="col2">
                    <a href="#">
                        <img src="img/logo/glittergrej-mail-icon.png" alt="glittergrej-mail" class="img-logo">
                    </a>
                    <a href="#">kys@glittergrej.dk</a>
                </div>
                <div class="col1 col2">
                    <a href="https://www.facebook.com/glittergrej">
                        <img src="img/logo/glittergrej-facebook-icon.png" alt="glittergrej-facebook" class="img-logo">
                    </a>
                    <a href="https://www.instagram.com/glittergrej/">
                        <img src="img/logo/glittergrej-instagram-icon.png" alt="glittergrej-instagram" class="img-logo">
                    </a>
                </div>
            </div>
        </div>

    </footer>

</body>
<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        console.log('DOM loaded');
        hentData();
    });

    let filter = "alle";
    let produkter;
    let container = document.querySelector("#container");
    let temp = document.querySelector("template");

    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get("id");

    const link = "http://creativeworld.dk/kea02/tema10/glittergrej/wordpress/wp-json/wp/v2/produkter?per_page=100"

    document.addEventListener("DOMContentLoaded", hentData);


    async function hentData() {
        const respons = await fetch(link);
        produkter = await respons.json();
        addEventListenersToButtons();
        vis(produkter);
    }

    function vis(produkter) {
        //Løber igennem array "destinationer" fra JSON
        container.innerHTML = "";
        produkter.forEach(produkt => {
            if (filter == "alle" || filter == produkt.categories) {
                console.log(produkt);
                const klon = temp.cloneNode(true).content;
                klon.querySelector(".produktnavn").textContent = produkt.produktnavn;
                klon.querySelector(".produktbillede1").src = produkt.produktbillede_1.guid;
                klon.querySelector(".produktpris").textContent = produkt.produktpris + " kr.";


                klon.querySelector("article").addEventListener("click", () => visDetaljer(produkt));

                container.appendChild(klon);

            }

        })

        produkter.forEach(produkt => {

            if (id == produkt.id) {
                visDetaljer(produkt)
            }
        })
    }

    function visDetaljer(produkt) {
        location.href = `singleview-dev.html?id=${produkt.id}`;

    }

    function addEventListenersToButtons() {
        document.querySelectorAll(".filter").forEach((btn) => {
            btn.addEventListener("click", filterBTNs);
        });
    }

    function filterBTNs() {
        filter = this.dataset.item;
        document.querySelectorAll(".filter").forEach((btn) => {
            btn.classList.remove("valgt");
        });

        this.classList.add("valgt");
        vis(produkter);
    }

</script>

</html>
